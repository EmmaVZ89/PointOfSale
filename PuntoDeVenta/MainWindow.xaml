<Window x:Class="PuntoDeVenta.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PuntoDeVenta" xmlns:viewmodels="clr-namespace:PuntoDeVenta.Views"
        mc:Ignorable="d"
        Title="Inicio" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen" WindowStyle="None"
        AllowsTransparency="True" Background="Transparent">

    <Window.Resources>
        <DataTemplate x:Name="Usuarios" DataType="{x:Type viewmodels:Usuarios}">
            <viewmodels:Usuarios DataContext="{Binding}"></viewmodels:Usuarios>
        </DataTemplate>
    </Window.Resources>

    <!-- VISTA PRINCIPAL -->
    <Border CornerRadius="10" Background="Transparent">
        <Grid Name="Principal" Background="Transparent">
            <!-- HEADER -->
            <Grid Name="Header" Height="40" VerticalAlignment="Top" Background="Transparent">
                <Border CornerRadius="10,10,0,0" Loaded="RestaurarVentana" Style="{DynamicResource BackgroundHeaderStyle}"></Border>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/> <!-- Titulo -->
                        <ColumnDefinition Width="*"/>    <!-- Espacio -->
                        <ColumnDefinition Width="Auto"/> <!-- Controles -->
                    </Grid.ColumnDefinitions>

                    <!-- Titulo -->
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="15,0,0,0">
                        <TextBlock Text="Gestion de Ventas" Foreground="White" FontSize="18" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Controles Derecha -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="0,0,10,0">

                        <!-- Selector de Tema -->
                        <Border Background="#20FFFFFF" CornerRadius="15" Margin="0,0,15,0" Padding="5,3" VerticalAlignment="Center">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Tema:" Foreground="White" FontSize="11" VerticalAlignment="Center" Margin="5,0,8,0" Opacity="0.9"/>
                                <Button x:Name="BtnTemaGreen" Click="TemaGreen_Click" ToolTip="Verde" Cursor="Hand" Margin="2,0">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <Grid>
                                                <Ellipse Width="22" Height="22" Fill="#27AE60" Stroke="White" StrokeThickness="2"/>
                                                <Path x:Name="CheckGreen" Data="M9,16.17L4.83,12l-1.42,1.41L9,19 21,7l-1.41-1.41z"
                                                      Fill="White" Stretch="Uniform" Width="12" Height="12"
                                                      HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>
                                            </Grid>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button x:Name="BtnTemaDark" Click="TemaDark_Click" ToolTip="Oscuro" Cursor="Hand" Margin="2,0">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <Grid>
                                                <Ellipse Width="22" Height="22" Fill="#2C3E50" Stroke="White" StrokeThickness="2"/>
                                                <Path x:Name="CheckDark" Data="M9,16.17L4.83,12l-1.42,1.41L9,19 21,7l-1.41-1.41z"
                                                      Fill="White" Stretch="Uniform" Width="12" Height="12"
                                                      HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>
                                            </Grid>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button x:Name="BtnTemaRed" Click="TemaRed_Click" ToolTip="Rojo" Cursor="Hand" Margin="2,0,5,0">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <Grid>
                                                <Ellipse Width="22" Height="22" Fill="#E74C3C" Stroke="White" StrokeThickness="2"/>
                                                <Path x:Name="CheckRed" Data="M9,16.17L4.83,12l-1.42,1.41L9,19 21,7l-1.41-1.41z"
                                                      Fill="White" Stretch="Uniform" Width="12" Height="12"
                                                      HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>
                                            </Grid>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        </Border>

                        <!-- Separador -->
                        <Rectangle Width="1" Height="20" Fill="#40FFFFFF" Margin="0,0,10,0" VerticalAlignment="Center"/>

                        <!-- Mi Cuenta -->
                        <Button x:Name="BtnCuenta" Click="MiCuenta" Style="{DynamicResource BTNHEADERSTYLE}" Width="30" Height="30" Margin="0,0,5,0" ToolTip="Mi Cuenta">
                            <Path Data="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"
                                  Fill="White" Stretch="Uniform" Width="16" Height="16"/>
                        </Button>

                        <!-- Info -->
                        <Button x:Name="BtnInfo" Click="AcercaDe" Style="{DynamicResource BTNHEADERSTYLE}" Width="30" Height="30" Margin="0,0,5,0" ToolTip="Acerca de">
                            <Path Data="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"
                                  Fill="White" Stretch="Uniform" Width="16" Height="16"/>
                        </Button>

                        <!-- Minimizar -->
                        <Button x:Name="BtnMinimizar" Click="Minimizar" Style="{DynamicResource BTNHEADERSTYLE}" Width="30" Height="30" Margin="0,0,5,0">
                            <Path Data="M20,14H4V10H20" Fill="White" Stretch="Uniform" Width="14" Height="14"/>
                        </Button>

                        <!-- Cerrar -->
                        <Button x:Name="BtnCerrar" Click="Cerrar" Style="{DynamicResource BTNHEADERSTYLE}" Width="30" Height="30">
                            <Path Data="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
                                  Fill="White" Stretch="Uniform" Width="14" Height="14"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>

            <!-- CONTENIDO -->
            <Grid x:Name="GridContent" Background="Transparent" Margin="0,40,0,0" PreviewMouseLeftButtonDown="PreviewMouseLeftButtonDownBG">
                <Border CornerRadius="0,0,10,10" Style="{DynamicResource BackgroundContenidoStyle}"></Border>
                <ContentControl Content="{Binding}" Margin="75,0,0,0" x:Name="ContentControl"/>
            </Grid>

            <!-- SIDEBAR -->
            <Grid x:Name="GridMenu" Background="Transparent" Width="75" HorizontalAlignment="Left" Margin="0,40,0,0">
                <Border Style="{DynamicResource BackgroundSidebarStyle}" CornerRadius="0,0,0,10"></Border>
                
                <StackPanel Background="Transparent" VerticalAlignment="Top">
                    <!-- Toggle Menu -->
                    <Grid Height="50">
                        <ToggleButton x:Name="BtnShowHide" Width="40" Height="40" HorizontalAlignment="Right" Margin="0,0,10,0"
                                      Checked="TBShow" Unchecked="TBHide" Style="{DynamicResource BtnShowHide}">
                            <Path Data="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" Fill="White" Stretch="Uniform" Width="20" Height="20"/>
                            <ToggleButton.Triggers>
                                <EventTrigger RoutedEvent="ToggleButton.Checked">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="GridMenu" Storyboard.TargetProperty="Width" To="220" Duration="0:0:0.3"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                                <EventTrigger RoutedEvent="ToggleButton.Unchecked">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="GridMenu" Storyboard.TargetProperty="Width" To="75" Duration="0:0:0.3"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </ToggleButton.Triggers>
                        </ToggleButton>
                    </Grid>

                    <!-- Lista Menu -->
                    <ListView Background="Transparent" BorderThickness="0" Margin="0,10,0,0" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        
                        <!-- Inicio -->
                        <ListViewItem Height="60" x:Name="lvInicio" Style="{DynamicResource ListViewStyle}" IsSelected="True">
                            <Button x:Name="BtnInicio" Click="Dashboard" Height="60" Width="220" Style="{DynamicResource BtnListaStyle}">
                                <StackPanel Orientation="Horizontal" Width="220">
                                    <Viewbox Width="24" Height="24" Margin="20,0,20,0">
                                        <Path Data="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" Fill="White"/>
                                    </Viewbox>
                                    <TextBlock Text="Inicio" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Button>
                        </ListViewItem>

                        <!-- POS -->
                        <ListViewItem Height="60" x:Name="lvPOS" Style="{DynamicResource ListViewStyle}">
                            <Button x:Name="BtnPOS" Click="POS" Height="60" Width="220" Style="{DynamicResource BtnListaStyle}">
                                <StackPanel Orientation="Horizontal" Width="220">
                                    <Viewbox Width="24" Height="24" Margin="20,0,20,0">
                                        <Path Data="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" Fill="White"/>
                                    </Viewbox>
                                    <TextBlock Text="Punto de Venta" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Button>
                        </ListViewItem>

                        <!-- Productos -->
                        <ListViewItem Height="60" x:Name="lvProductos" Style="{DynamicResource ListViewStyle}">
                            <Button x:Name="BtnProductos" Click="Productos_Click" Height="60" Width="220" Style="{DynamicResource BtnListaStyle}">
                                <StackPanel Orientation="Horizontal" Width="220">
                                    <Viewbox Width="24" Height="24" Margin="20,0,20,0">
                                        <Path Data="M12,18H6V14H12M21,14V12L20,7H4L3,12V14H4V20H14V14H18V20H20V14M20,4H4V6H20V4Z" Fill="White"/>
                                    </Viewbox>
                                    <TextBlock Text="Productos" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Button>
                        </ListViewItem>

                        <!-- Clientes -->
                        <ListViewItem Height="60" x:Name="lvClientes" Style="{DynamicResource ListViewStyle}">
                            <Button x:Name="BtnClientes" Click="Clientes_Click" Height="60" Width="220" Style="{DynamicResource BtnListaStyle}">
                                <StackPanel Orientation="Horizontal" Width="220">
                                    <Viewbox Width="24" Height="24" Margin="20,0,20,0">
                                        <Path Data="M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z" Fill="White"/>
                                    </Viewbox>
                                    <TextBlock Text="Clientes" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Button>
                        </ListViewItem>

                        <!-- Inventario -->
                        <ListViewItem Height="60" x:Name="lvInventario" Style="{DynamicResource ListViewStyle}">
                            <Button x:Name="BtnInventario" Click="Inventario_Click" Height="60" Width="220" Style="{DynamicResource BtnListaStyle}">
                                <StackPanel Orientation="Horizontal" Width="220">
                                    <Viewbox Width="24" Height="24" Margin="20,0,20,0">
                                        <Path Data="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" Fill="White"/>
                                    </Viewbox>
                                    <TextBlock Text="Inventario" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Button>
                        </ListViewItem>

                        <!-- Reportes -->
                        <ListViewItem Height="60" x:Name="lvReportes" Style="{DynamicResource ListViewStyle}">
                            <Button x:Name="BtnReportes" Click="Reportes_Click" Height="60" Width="220" Style="{DynamicResource BtnListaStyle}">
                                <StackPanel Orientation="Horizontal" Width="220">
                                    <Viewbox Width="24" Height="24" Margin="20,0,20,0">
                                        <Path Data="M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z" Fill="White"/>
                                    </Viewbox>
                                    <TextBlock Text="Reportes" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Button>
                        </ListViewItem>

                        <!-- Cancelaciones -->
                        <ListViewItem Height="60" x:Name="lvCancelaciones" Style="{DynamicResource ListViewStyle}">
                            <Button x:Name="BtnCancelaciones" Click="Cancelaciones_Click" Height="60" Width="220" Style="{DynamicResource BtnListaStyle}">
                                <StackPanel Orientation="Horizontal" Width="220">
                                    <Viewbox Width="24" Height="24" Margin="20,0,20,0">
                                        <Path Data="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z" Fill="White"/>
                                    </Viewbox>
                                    <TextBlock Text="Cancelaciones" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Button>
                        </ListViewItem>

                        <!-- Usuarios -->
                        <ListViewItem Height="60" x:Name="lvUsuarios" Style="{DynamicResource ListViewStyle}">
                            <Button x:Name="BtnUsuarios" Click="Usuarios_click" Height="60" Width="220" Style="{DynamicResource BtnListaStyle}">
                                <StackPanel Orientation="Horizontal" Width="220">
                                    <Viewbox Width="24" Height="24" Margin="20,0,20,0">
                                        <Path Data="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" Fill="White"/>
                                    </Viewbox>
                                    <TextBlock Text="Usuarios" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Button>
                        </ListViewItem>

                    </ListView>
                </StackPanel>
            </Grid>

            <!-- LOADER OVERLAY (NUEVO) -->
            <Grid x:Name="LoadingOverlay" Background="#7F000000" Visibility="Collapsed" Panel.ZIndex="999">
                <Border Background="White" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Center" Padding="30,20">
                    <StackPanel>
                        <ProgressBar IsIndeterminate="True" Height="10" Width="200" Margin="0,0,0,15" Foreground="{DynamicResource AccentColor}" />
                        <TextBlock Text="Cargando..." FontSize="16" Foreground="#2C3E50" HorizontalAlignment="Center" FontWeight="SemiBold"/>
                    </StackPanel>
                </Border>
            </Grid>

        </Grid>
    </Border>
    <!--#ENDREGION-->

</Window>
